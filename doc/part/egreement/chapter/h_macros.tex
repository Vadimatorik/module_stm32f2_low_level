\chapter{Объявление макросов}\label{mackros:0}
\section{Когда стоит объявлять макрос?}
Макрос следует объявить, если имеется фрагмент кода, многократно повторяющийся в коде программы с незначительными изменениями в каждом конкретном случае. При этом использовать отдельную constexpr функцию нерационально или невозможно.\\Пример: при заполнении массива структур инициализации выводов некоторое количество выводов инициализируются как входы ADC. Для того, чтобы не писать каждый раз все параметры каждого пина, достаточно будет воспользоваться макросом, в котором нужно указать изменяющиеся параметры: имя порта и вывода.

\section{Размещение макросов}
Прототипы макросов должны быть размещены в \textbf{.h} файлах.

\section{Оформление макросов}
\begin{itemize}
	\item перед первым объявленным макросом размещается комментарий о начале соответствующей области (области макросов), обернутый в многострочный комментарий с явно обозначенными границами символами <<*>> в количестве 70 штук. После комментария должна следовать  пустая строка;
	\item перед каждым макросом размещается его краткое описание, обернутое в многострочный комментарий. После краткого описания пустая строка не ставится;
	\item заголовок макроса следует оформить следующим образом:
	\begin{enumerate}
		\item ключевое слово \#define без отступов в начале строки;
		\item отступ в один (1) пробел;
		\item имя макроса (в соответствии с правилами написания макросов);
		\item открывающаяся скобка (<<(>>);
		\item параметры макроса через запятую без пробелов в соответствии с правилами написания макросов;
		\item закрывающаяся скобка (<<)>>);
		\item тело макроса;
	\end{enumerate}
\end{itemize}\textbf{Пример:}\begin{lstlisting}[language=C++, frame=tlBR, basicstyle=\fontsize{10}{10}\ttfamily]
/**********************************************************************
 * Область макросов.
 **********************************************************************/

/*
 * Возвращает структуру конфигурации вывода,
 * настроенного на вход, подключенный к ADC.
 */
#define M_PIN_CFG_ADC(PORT,PIN)	{											\
	.port							= PORT,														\
	.pin_name					= PIN,														\
	.mode							= EC_PIN_MODE::ANALOG,						\
	.output_config		= EC_PIN_OUTPUT_CFG::NOT_USE,			\
	.speed						= EC_PIN_SPEED::LOW,							\
	.pull							= EC_PIN_PULL::NO,								\
	.af								= EC_PIN_AF::NOT_USE,							\
	.locked						= EC_LOCKED::LOCKED,							\
	.state_after_init	= EC_PIN_STATE_AFTER_INIT::NO_USE	\
}\end{lstlisting}