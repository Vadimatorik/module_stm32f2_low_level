\section{Объявление packed структур}\label{struct:p}
\subsection{Когда стоит объявлять структуру как packed?}
Структуру следует объявить как packed, если она:
\begin{itemize}
	\item описывает совокупность регистров аппаратного блока периферии (у которого, как известно, регистры имеют четко фиксированный размер и порядок следования);
	\item описывает образ памяти регистров аппаратного блока;
	\item описывает структуру какого-либо пакета со строго фиксированными полями.
\end{itemize}

\subsection{Размещение packed структур}
Packed структуры должны быть размещены только в \textbf{.h} файлах. 

\subsection{Оформление packed структур}
\begin{itemize}
	\item перед первой объявленной packed структурой размещается комментарий о начале области packed структур, обернутый в много строчный комментарий с явно обозначенными границами, бросающимися в газа. После чего вставляется пустая строка;
	\item перед каждой packed структурой размещается ее краткое описание, обернутое в много строчный комментарий. После краткого описания пустая строка не ставится;
	\item заголовок структуры следует оформить следующим образом:
	\begin{enumerate}
		\item ключевое слово struct без отступов в начале строки;
		\item отступ в один (1) пробел;
		\item директива препроцессора <<\_\_attribute\_\_((packed))>>;
		\item пробел;
		\item имя структуры;
		\item пробел;
		\item открывающая тело packed структуры скобка <<\{>>;
	\end{enumerate}
	\item поля структуры следует оформлять следующим образом:
	\begin{enumerate}
		\item каждая строка начинается с отступа в один (1) tab;
		\item ключевое слово volatile;
		\item один (1) пробел;
		\item тип поля;
		\item требуемое количество отступов, выполненных с помощью tab;
		\item имя поля;
		\item <<;>>;
		\item требуемое количество tab;
		\item <<// >> (// + пробел) + одно строчный комментарий.
	\end{enumerate}
	\item все имена полей структуры должны быть выравнены с помощью tab между собой;
	\item после последнего поля структуры следует скобка закрытия тела структуры (<<\}>>);
	\item после последней packed структуры вставляется пуста строка.
\end{itemize}\textbf{Пример packed области:}\begin{lstlisting}[language=C++, frame=tlBR, basicstyle=\fontsize{9}{9}\ttfamily]
/**************************************************************
 * Packed struct label.
 **************************************************************/

/*
 * Packed struct description...
 */
struct __attribute__((packed)) port_registers_struct {
	volatile uint32_t	mode;		// Comment...
	volatile uint32_t	otype;		// Comment...
	...;
};

\end{lstlisting}