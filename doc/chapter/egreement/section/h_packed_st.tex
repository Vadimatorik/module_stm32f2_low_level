\section{Объявление упакованных структур (packed struct)}\label{struct:p}
\subsection{Когда стоит объявлять структуру как упакованную (packed struct)?}
Структуру следует объявить как упакованную (packed struct), если она:
\begin{itemize}
	\item описывает совокупность регистров аппаратного блока периферии (у которого, как известно, регистры имеют четко фиксированный размер и порядок следования);
	\item описывает образ памяти регистров аппаратного блока;
	\item описывает структуру какого-либо пакета со строго фиксированными полями.
\end{itemize}

\subsection{Размещение упакованных структур (packed struct)}
Packed структуры должны быть размещены только в \textbf{.h} файлах. 

\subsection{Оформление упакованных структур (packed struct)}
\begin{itemize}
	\item перед первой объявленной упакованной структурой размещается комментарий о начале соответствующей области (области упакованных структур), обернутый в многострочный комментарий с явно обозначенными границами символами <<*>> в количестве 70 штук. После комментария должна следовать  пустая строка;
	\item перед каждой packed структурой размещается ее краткое описание, обернутое в много строчный комментарий. После краткого описания пустая строка не ставится;
	\item заголовок структуры следует оформить следующим образом:
	\begin{enumerate}
		\item ключевое слово struct без отступов в начале строки;
		\item отступ в один (1) пробел;
		\item директива препроцессора <<\_\_attribute\_\_((packed))>>;
		\item пробел;
		\item имя структуры;
		\item пробел;
		\item открывающая тело packed структуры скобка <<\{>>;
	\end{enumerate}
	\item поля структуры следует оформлять следующим образом:
	\begin{enumerate}
		\item каждая строка начинается с отступа в один (1) tab;
		\item ключевое слово volatile;
		\item один (1) пробел;
		\item тип поля;
		\item требуемое количество отступов, выполненных с помощью tab;
		\item имя поля;
		\item <<;>>;
		\item требуемое количество tab;
		\item <<// >> (// + пробел) + одно строчный комментарий.
	\end{enumerate}
	\item все имена полей структуры должны быть выравнены с помощью tab между собой;
	\item после последнего поля структуры следует скобка закрытия тела структуры (<<\}>>);
	\item после последней packed структуры вставляется пуста строка.
\end{itemize}\textbf{Пример packed области:}\begin{lstlisting}[language=C++, frame=tlBR, basicstyle=\fontsize{10}{10}\ttfamily]
/**********************************************************************
 * Область упакованных структур.
 **********************************************************************/

/*
 * Перечень регистров физического порта ввода - вывода.
 */
struct __attribute__((packed)) port_registers_struct {
	volatile uint32_t	mode;		// Регистр выбора режима работы выводов.
	volatile uint32_t	otype;	// Регистр выбора режима выхода 
														// ( в случае, если вывод настроен как выход ).
	volatile uint32_t	ospeede;// Регистр выбора скорости выводов.
	volatile uint32_t	pupd;		// Регистр включения подтяжки выводов.
	volatile uint32_t	id;			// Регистр с текущими данными на входе вывода.
	volatile uint32_t	od;			// Регистр с выставленными пользователем на выход данными
														// ( в случае, если вывод настроен как выход ).
	volatile uint32_t	bsr;		// Регистр быстрой установки состояния выводов
														// ( когда вывод настроен как выход ).
	volatile uint32_t	lck;		// Регистр блокировки настроек.
	volatile uint32_t	afl;		// Младший регистр настройки альтернативных функций выводов.
	volatile uint32_t	afh;		// Старший регистр настройки альтернативных функций выводов.
};\end{lstlisting}